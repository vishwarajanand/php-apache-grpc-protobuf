# In this directory, run the following command to build this builder.
# $ gcloud builds submit . --config=cloudbuild.yaml

steps:
# Build the container image
- name: "gcr.io/cloud-builders/docker"
  args: ['build', '-t', 'vishwaraj00/php-8.0-apache-grpc-protobuf', '.']
  timeout: 9000s

# docker login -u vishwaraj00 -p <REPLACE_PASSWORD> docker.io
- name: "gcr.io/cloud-builders/docker"
  args: ['login', '-u', 'vishwaraj00', '-p', '<REPLACE_PASSWORD>', 'docker.io']
  timeout: 9000s

# Push the container image to Container Registry
- name: 'gcr.io/cloud-builders/docker'
  args: ['push',
          'vishwaraj00/php-8.0-apache-grpc-protobuf']

images:
- 'vishwaraj00/php-8.0-apache-grpc-protobuf'

timeout: 24000s

options:
  logging: CLOUD_LOGGING_ONLY
